#!/bin/sh
cd "$(dirname "$0")/.." || exit 1

echo "Running lint..."
npm run lint || exit 1

echo "Running unit tests..."
npm run test || exit 1

echo "Running build..."
npm run build || exit 1

if [ "${SKIP_E2E:-0}" = "1" ]; then
  echo "Skipping Playwright e2e (SKIP_E2E=1)."
  exit 0
fi

if ! command -v bash >/dev/null 2>&1; then
  echo "Skipping Playwright e2e (bash not found in PATH)."
  exit 0
fi

echo "Running e2e tests..."
npm run test:e2e || exit 1